<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Apache Flink Continuous Deployment | imalik8088</title>
<meta name="keywords" content="apache flink, continuous delivery">
<meta name="description" content="Coming from Kafka-Streams continuous delivery (CD) is quite an easy task, and almost no effort has to be done compared to Apache Flink. Because the state of a Kafka-Streams application is stored in Kafka, and it can build up the state after a redeployment from so-called changelog topics, therefore Kafka-Streams is also bounded to have source and sink to Apache Kafka.
Apache Flink on the other hand has the freedom to choose from a variety of source systems, e.">
<meta name="author" content="Akhlaq Malik">
<link rel="canonical" href="https://imalik8088.de/posts/apache-flink-continuous-deployment/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.83e70b8409491596b24bfce6a7f2c88e797beb91412e324e09c7a7dfc2cd07a8.css" integrity="sha256-g&#43;cLhAlJFZayS/zmp/LIjnl765FBLjJOCcen38LNB6g=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://imalik8088.de/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://imalik8088.de/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://imalik8088.de/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://imalik8088.de/apple-touch-icon.png">
<link rel="mask-icon" href="https://imalik8088.de/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Apache Flink Continuous Deployment" />
<meta property="og:description" content="Coming from Kafka-Streams continuous delivery (CD) is quite an easy task, and almost no effort has to be done compared to Apache Flink. Because the state of a Kafka-Streams application is stored in Kafka, and it can build up the state after a redeployment from so-called changelog topics, therefore Kafka-Streams is also bounded to have source and sink to Apache Kafka.
Apache Flink on the other hand has the freedom to choose from a variety of source systems, e." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://imalik8088.de/posts/apache-flink-continuous-deployment/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-03-30T09:00:00+01:00" />
<meta property="article:modified_time" content="2021-03-30T09:00:00+01:00" /><meta property="og:site_name" content="imalik8088" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Apache Flink Continuous Deployment"/>
<meta name="twitter:description" content="Coming from Kafka-Streams continuous delivery (CD) is quite an easy task, and almost no effort has to be done compared to Apache Flink. Because the state of a Kafka-Streams application is stored in Kafka, and it can build up the state after a redeployment from so-called changelog topics, therefore Kafka-Streams is also bounded to have source and sink to Apache Kafka.
Apache Flink on the other hand has the freedom to choose from a variety of source systems, e."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://imalik8088.de/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Apache Flink Continuous Deployment",
      "item": "https://imalik8088.de/posts/apache-flink-continuous-deployment/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Apache Flink Continuous Deployment",
  "name": "Apache Flink Continuous Deployment",
  "description": "Coming from Kafka-Streams continuous delivery (CD) is quite an easy task, and almost no effort has to be done compared to Apache Flink. Because the state of a Kafka-Streams application is stored in Kafka, and it can build up the state after a redeployment from so-called changelog topics, therefore Kafka-Streams is also bounded to have source and sink to Apache Kafka.\nApache Flink on the other hand has the freedom to choose from a variety of source systems, e.",
  "keywords": [
    "apache flink", "continuous delivery"
  ],
  "articleBody": "Coming from Kafka-Streams continuous delivery (CD) is quite an easy task, and almost no effort has to be done compared to Apache Flink. Because the state of a Kafka-Streams application is stored in Kafka, and it can build up the state after a redeployment from so-called changelog topics, therefore Kafka-Streams is also bounded to have source and sink to Apache Kafka.\nApache Flink on the other hand has the freedom to choose from a variety of source systems, e.g. Kafka, Pulsar, RabbitMQ and many other sources to consume and build the streaming application. Therefore it could not rely on changelog topics as Kafka-Streams does. Apache Flink offers out of the box following State Backends for stateful streaming processing:\nMemoryStateBackend FsStateBackend RocksDBStateBackend For more details and an in depth description of each state backend with the limitations and the use cases, please look at the official documentation. In this article I’ll be using FsStateBackend for the examples.\nConfigure checkpointing with FsStateBackend Before starting to build up the state of a stateful Flink application you have to save the state somewhere or better to say you have to choose of one of the three available state backend implementations or you have to build your custom state backend. I’ve have configure the FsStateBackend as followed in Flink application:\n1ParameterTool parameter = ParameterTool.fromArgs(args); 2StreamExecutionEnvironment executionEnvironment = StreamExecutionEnvironment.getExecutionEnvironment(); 3executionEnvironment.enableCheckpointing(Duration.ofSeconds(60).toMillis()); 4executionEnvironment.getCheckpointConfig().enableExternalizedCheckpoints(RETAIN_ON_CANCELLATION); 5executionEnvironment.setStateBackend(new FsStateBackend(parameter.get(\"s3-uri\"))); In order to use the FsStateBackend you have to add the following dependency, if you are using AWS S3 for your state.\norg.apache.flink flink-s3-fs-hadoop ${flink.version} Configure the application for continuous delivery After setting up the FsStateBackend for the stateful streaming application the main question is how to have a seamless, continuous delivery pipeline where your application starts with the latest checkpoint from the old deployed version (job id). To my surprise, I didn’t find a lot of resources out there in the internet so I looked around and also asked the community. I got the following answer and the following tools that could be helpful for a seamless deployment of Flink applications.\n… but the deployment process involves several steps, any of which might potentially fail. So it’s a bit complex to fully automate.\nVerverica Platform Community Edition - build by the creator of Flink Flink-Deployer - a tool build by ing-diba bank The mentioned tools would be a bigger time invest and it would need to be investigated more before using these tools for a project in a bigger corporation. So we have to came up with something else in order to make a seamless deployment work in Kubernetes, where all our Apache Flink applications are running in.\nAfter Bundling the application in an official Flink docker container, the application can be started with following arguments passed to a Kubernetes deployment:\ncontainers: - name: jobmanager image: your_awesome_flink_app: args: - \"standalone-job\" - \"--job-classname\" - \"a.b.c.MainClassOfStreamingApp\" - \"--fromSavepoint\" - \"s3://bucket_name/dir_were_to_store_the_state_v1/last-state/_metadata\" - \"--s3-uri\" - \"s3://bucket_name/dir_were_to_store_the_state_v1\" - \"-Ds3.access-key=$(AWS_ACCESS_KEY_ID)\" - \"-Ds3.secret-key=$(AWS_SECRET_KEY)\" The important part is the --fromSavepoint argument and the last-state directory in S3 which is being created or better to say copied over by a Kubernetes cronjob that runs every minute. The following bash script for the cronjob is the heart, with whom we are able to have a continuous delivery without changing the path of the --fromSavepoint argument to the old job id which is being randomly created for each jobmanger.\n1#!/usr/bin/env sh 2 3APP_NAME=\"$1\" 4JOBMANAGER_URL=\"$2\" 5shift; 6 7if [ \"${APP_NAME}\" == \"--help\" -o \"${APP_NAME}\" == \"\" -o \"${JOBMANAGER_URL}\" == \"\" ]; then 8 echo \"Usage: 9 10 app-name: subfolder of the bucket where the state needs to be saved. This dir needs to be created manually at first 11 jobmanager-url: k8s service url of the jobmanager without port 12 \" 13 exit 1 14else 15 set -e 16 17 # (1) looking for the job id 18 RUNNING_JOBS=$(curl -s $JOBMANAGER_URL:8081/jobs) 19 JOBID=$(echo $RUNNING_JOBS | jq -r '.jobs | .[0] | select(.status==\"RUNNING\") | .id') 20 if [ -z \"$JOBID\" ]; then 21 echo \"No Flink job id found\" 22 exit 1 23 fi 24 echo \"Looking for $JOBID job id state\" 25 26 # (2) link current checkpoint to last_state 27 LAST_METADATA=$(aws s3 ls s3://$AWS_BUCKET_NAME/$APP_NAME/$JOBID --recursive | sort | grep _metadata | grep -v \"last-state\" | tail -n1 | awk '{print $4}') 28 echo $LAST_METADATA 29 # (3) 30 timeout -t 60 aws s3 cp s3://$AWS_BUCKET_NAME/$LAST_METADATA s3://$AWS_BUCKET_NAME/$APP_NAME/last-state/_metadata 31 exit $? 32fi 33 34exec \"$@\" (1) Apache Flink’s JobManager API is being used to get all running jobs and select the first (limitation of this script) jobs id.\n(2) This Job id is being used to grep the _metadata file by from the latest checkpoint of the currently running Flink job.\nThe last step (3) is copying the found metadata file and to the last-state directory from where the application is restoring from during restart or reployment.\nThe shown script is bundled in a container as a docker-entrypoint file where aws cli, curl and jq should be available. This container is then being used and started as Kubernetes cronjob with the following arguments:\ncontainers: - name: aws-container image: image-with-aws-jq-and-curl-and-the-script:latest args: - \"dir_were_to_store_the_state_v1\" - \"k8s-service-of-flink-jobmanager\" Conclusion In this blog post the challenges of a stateful streaming application in Apache Flink for a continuous delivery process has been dicussed and a solution that worked for my client has been shown. I’m quite interested to get feedback by the Flink community, in which pitfalls this approach may lead into and in which scenarios it may not work.\n",
  "wordCount" : "912",
  "inLanguage": "en",
  "datePublished": "2021-03-30T09:00:00+01:00",
  "dateModified": "2021-03-30T09:00:00+01:00",
  "author":{
    "@type": "Person",
    "name": "Akhlaq Malik"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://imalik8088.de/posts/apache-flink-continuous-deployment/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "imalik8088",
    "logo": {
      "@type": "ImageObject",
      "url": "https://imalik8088.de/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://imalik8088.de/" accesskey="h" title="imalik8088 (Alt + H)">imalik8088</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://imalik8088.de/about_me/" title="about me">
                    <span>about me</span>
                </a>
            </li>
            <li>
                <a href="https://imalik8088.de/archives/" title="archives">
                    <span>archives</span>
                </a>
            </li>
            <li>
                <a href="https://imalik8088.de/tags/" title="tags">
                    <span>tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Apache Flink Continuous Deployment
    </h1>
    <div class="post-meta"><span title='2021-03-30 09:00:00 +0100 +0100'>March 30, 2021</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Akhlaq Malik

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul><ul><ul>
                <li>
                    <a href="#configure-checkpointing-with-fsstatebackend" aria-label="Configure checkpointing with FsStateBackend">Configure checkpointing with <code>FsStateBackend</code></a></li></ul>
                    
                <li>
                    <a href="#configure-the-application-for-continuous-delivery" aria-label="Configure the application for continuous delivery">Configure the application for continuous delivery</a></li></ul>
                    
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>Coming from Kafka-Streams continuous delivery (CD) is quite an easy task, and almost no effort has to be done compared to Apache Flink. Because the state of a Kafka-Streams application is stored in Kafka, and it can build up the state after a redeployment from so-called changelog topics, therefore Kafka-Streams is also bounded to have source and sink to Apache Kafka.</p>
<p>Apache Flink on the other hand has the freedom to choose from a variety of source systems, e.g. Kafka, Pulsar, RabbitMQ and many <a href="https://ci.apache.org/projects/flink/flink-docs-release-1.12/dev/connectors/" title="Apache Flink connectors">other sources</a> to consume and build the streaming application. Therefore it could not rely on changelog topics as Kafka-Streams does. Apache Flink offers out of the box following State Backends for stateful streaming processing:</p>
<ul>
<li>MemoryStateBackend</li>
<li>FsStateBackend</li>
<li>RocksDBStateBackend</li>
</ul>
<p>For more details and an in depth description of each state backend with the limitations and the use cases, please <a href="https://ci.apache.org/projects/flink/flink-docs-stable/ops/state/state_backends.html" title="available State Backends">look at the official documentation</a>. In this article I&rsquo;ll be using  <code>FsStateBackend</code> for the examples.</p>
<h3 id="configure-checkpointing-with-fsstatebackend">Configure checkpointing with <code>FsStateBackend</code><a hidden class="anchor" aria-hidden="true" href="#configure-checkpointing-with-fsstatebackend">#</a></h3>
<p>Before starting to build up the state of a stateful Flink application you have to save the state somewhere or better to say you have to choose of one of the three available state backend implementations or you have to build your custom state backend. I&rsquo;ve have configure the <code>FsStateBackend</code> as followed in Flink application:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span>ParameterTool parameter <span style="color:#f92672">=</span> ParameterTool<span style="color:#f92672">.</span><span style="color:#a6e22e">fromArgs</span><span style="color:#f92672">(</span>args<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>StreamExecutionEnvironment executionEnvironment <span style="color:#f92672">=</span> StreamExecutionEnvironment<span style="color:#f92672">.</span><span style="color:#a6e22e">getExecutionEnvironment</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>executionEnvironment<span style="color:#f92672">.</span><span style="color:#a6e22e">enableCheckpointing</span><span style="color:#f92672">(</span>Duration<span style="color:#f92672">.</span><span style="color:#a6e22e">ofSeconds</span><span style="color:#f92672">(</span><span style="color:#ae81ff">60</span><span style="color:#f92672">).</span><span style="color:#a6e22e">toMillis</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>executionEnvironment<span style="color:#f92672">.</span><span style="color:#a6e22e">getCheckpointConfig</span><span style="color:#f92672">().</span><span style="color:#a6e22e">enableExternalizedCheckpoints</span><span style="color:#f92672">(</span>RETAIN_ON_CANCELLATION<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>executionEnvironment<span style="color:#f92672">.</span><span style="color:#a6e22e">setStateBackend</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> FsStateBackend<span style="color:#f92672">(</span>parameter<span style="color:#f92672">.</span><span style="color:#a6e22e">get</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;s3-uri&#34;</span><span style="color:#f92672">)));</span>
</span></span></code></pre></div><p>In order to use the  <code>FsStateBackend </code> you have to add the following dependency, if you are using AWS S3 for your state.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;groupId&gt;</span>org.apache.flink<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;artifactId&gt;</span>flink-s3-fs-hadoop<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;version&gt;</span>${flink.version}<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span></code></pre></div><h2 id="configure-the-application-for-continuous-delivery">Configure the application for continuous delivery<a hidden class="anchor" aria-hidden="true" href="#configure-the-application-for-continuous-delivery">#</a></h2>
<p>After setting up the FsStateBackend for the stateful streaming application the main question is how to have a seamless, continuous delivery pipeline where your application starts with the latest checkpoint from the old deployed version (job id). To my surprise, I didn&rsquo;t find a lot of resources out there in the internet so I looked around and also asked the community. I got the following answer and the following tools that could be helpful for a seamless deployment of Flink applications.</p>
<blockquote>
<p>&hellip; but the deployment process involves several steps, any of which might potentially fail. So it&rsquo;s a bit complex to fully automate.</p>
</blockquote>
<ul>
<li><a href="https://www.ververica.com/pricing-editions">Ververica Platform Community Edition - build by the creator of Flink</a></li>
<li><a href="https://github.com/ing-bank/flink-deployer">Flink-Deployer - a tool build by ing-diba bank</a></li>
</ul>
<p>The mentioned tools would be a bigger time invest and it would need to be investigated more before using these tools for a project in a bigger corporation. So we have to came up with something else in order to make a seamless deployment work in <code>Kubernetes</code>, where all our Apache Flink applications are running in.</p>
<p>After Bundling the application in an <a href="https://hub.docker.com/_/flink">official Flink docker container</a>, the application can be started with following arguments passed to a Kubernetes deployment:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>    - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">jobmanager</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">image</span>: <span style="color:#ae81ff">your_awesome_flink_app:&lt;TAG&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">args</span>:
</span></span><span style="display:flex;"><span>         - <span style="color:#e6db74">&#34;standalone-job&#34;</span>
</span></span><span style="display:flex;"><span>         - <span style="color:#e6db74">&#34;--job-classname&#34;</span>
</span></span><span style="display:flex;"><span>         - <span style="color:#e6db74">&#34;a.b.c.MainClassOfStreamingApp&#34;</span>
</span></span><span style="display:flex;"><span>         - <span style="color:#e6db74">&#34;--fromSavepoint&#34;</span>
</span></span><span style="display:flex;"><span>         - <span style="color:#e6db74">&#34;s3://bucket_name/dir_were_to_store_the_state_v1/last-state/_metadata&#34;</span>
</span></span><span style="display:flex;"><span>         - <span style="color:#e6db74">&#34;--s3-uri&#34;</span>
</span></span><span style="display:flex;"><span>         - <span style="color:#e6db74">&#34;s3://bucket_name/dir_were_to_store_the_state_v1&#34;</span>
</span></span><span style="display:flex;"><span>         - <span style="color:#e6db74">&#34;-Ds3.access-key=$(AWS_ACCESS_KEY_ID)&#34;</span>
</span></span><span style="display:flex;"><span>         - <span style="color:#e6db74">&#34;-Ds3.secret-key=$(AWS_SECRET_KEY)&#34;</span>
</span></span></code></pre></div><p>The important part is the <code>--fromSavepoint</code> argument and the <code>last-state</code> directory in S3 which is being created or better to say copied over by a Kubernetes cronjob that runs every minute. The following bash script for the cronjob is the heart, with whom we are able to have a continuous delivery without changing the path of the <code>--fromSavepoint</code> argument to the old job id which is being randomly created for each jobmanger.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#75715e">#!/usr/bin/env sh
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>APP_NAME<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$1<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>JOBMANAGER_URL<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$2<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>shift;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>APP_NAME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;--help&#34;</span> -o <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>APP_NAME<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> -o <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">${</span>JOBMANAGER_URL<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>    echo <span style="color:#e6db74">&#34;Usage: &lt;app-name&gt; &lt;jobmanager-url&gt;
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#e6db74">    app-name: subfolder of the bucket where the state needs to be saved. This dir needs to be created manually at first
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#e6db74">    jobmanager-url: k8s service url of the jobmanager without port
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#e6db74">    &#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>    exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>    set -e
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>    <span style="color:#75715e"># (1) looking for the job id</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>    RUNNING_JOBS<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>curl -s $JOBMANAGER_URL:8081/jobs<span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>    JOBID<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>echo $RUNNING_JOBS | jq -r <span style="color:#e6db74">&#39;.jobs | .[0] | select(.status==&#34;RUNNING&#34;) | .id&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> -z <span style="color:#e6db74">&#34;</span>$JOBID<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">]</span>; <span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>      echo <span style="color:#e6db74">&#34;No Flink job id found&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>      exit <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>    <span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>    echo <span style="color:#e6db74">&#34;Looking for </span>$JOBID<span style="color:#e6db74"> job id state&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>    <span style="color:#75715e"># (2) link current checkpoint to last_state</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>    LAST_METADATA<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>aws s3 ls s3://$AWS_BUCKET_NAME/$APP_NAME/$JOBID --recursive | sort | grep _metadata | grep -v <span style="color:#e6db74">&#34;last-state&#34;</span> | tail -n1 | awk <span style="color:#e6db74">&#39;{print $4}&#39;</span><span style="color:#66d9ef">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>    echo $LAST_METADATA
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>    <span style="color:#75715e"># (3)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>    timeout -t <span style="color:#ae81ff">60</span> aws s3 cp s3://$AWS_BUCKET_NAME/$LAST_METADATA s3://$AWS_BUCKET_NAME/$APP_NAME/last-state/_metadata
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>    exit $?
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span><span style="color:#66d9ef">fi</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>exec <span style="color:#e6db74">&#34;</span>$@<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><p>(1) Apache Flink&rsquo;s JobManager API is being used to get all running jobs and select the first (limitation of this script) jobs id.</p>
<p>(2) This Job id is being used to grep the <code>_metadata</code> file by from the latest checkpoint of the currently running Flink job.</p>
<p>The last step (3) is copying the found <code>metadata</code> file and to the <code>last-state</code> directory from where the application is restoring from during restart or reployment.</p>
<p>The shown script is bundled in a container as a docker-entrypoint file where aws cli, curl and jq should be available. This container is then being used and started as Kubernetes cronjob with the following arguments:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">containers</span>:
</span></span><span style="display:flex;"><span>   - <span style="color:#f92672">name</span>: <span style="color:#ae81ff">aws-container</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">image</span>: <span style="color:#ae81ff">image-with-aws-jq-and-curl-and-the-script:latest</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">args</span>:
</span></span><span style="display:flex;"><span>          - <span style="color:#e6db74">&#34;dir_were_to_store_the_state_v1&#34;</span>
</span></span><span style="display:flex;"><span>          - <span style="color:#e6db74">&#34;k8s-service-of-flink-jobmanager&#34;</span>
</span></span></code></pre></div><h1 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h1>
<p>In this blog post the challenges of a stateful streaming application in Apache Flink for a continuous delivery process has been dicussed and a solution that worked for my client has been shown. I&rsquo;m quite interested to get feedback by the Flink community, in which pitfalls this approach may lead into and in which scenarios it may not work.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://imalik8088.de/tags/apache-flink/">apache flink</a></li>
      <li><a href="https://imalik8088.de/tags/continuous-delivery/">continuous delivery</a></li>
    </ul>

<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Apache Flink Continuous Deployment on twitter"
        href="https://twitter.com/intent/tweet/?text=Apache%20Flink%20Continuous%20Deployment&amp;url=https%3a%2f%2fimalik8088.de%2fposts%2fapache-flink-continuous-deployment%2f&amp;hashtags=apacheflink%2ccontinuousdelivery">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Apache Flink Continuous Deployment on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fimalik8088.de%2fposts%2fapache-flink-continuous-deployment%2f&amp;title=Apache%20Flink%20Continuous%20Deployment&amp;summary=Apache%20Flink%20Continuous%20Deployment&amp;source=https%3a%2f%2fimalik8088.de%2fposts%2fapache-flink-continuous-deployment%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Apache Flink Continuous Deployment on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fimalik8088.de%2fposts%2fapache-flink-continuous-deployment%2f&title=Apache%20Flink%20Continuous%20Deployment">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Apache Flink Continuous Deployment on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fimalik8088.de%2fposts%2fapache-flink-continuous-deployment%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Apache Flink Continuous Deployment on whatsapp"
        href="https://api.whatsapp.com/send?text=Apache%20Flink%20Continuous%20Deployment%20-%20https%3a%2f%2fimalik8088.de%2fposts%2fapache-flink-continuous-deployment%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Apache Flink Continuous Deployment on telegram"
        href="https://telegram.me/share/url?text=Apache%20Flink%20Continuous%20Deployment&amp;url=https%3a%2f%2fimalik8088.de%2fposts%2fapache-flink-continuous-deployment%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Apache Flink Continuous Deployment on ycombinator"
        href="https://news.ycombinator.com/submitlink?t=Apache%20Flink%20Continuous%20Deployment&u=https%3a%2f%2fimalik8088.de%2fposts%2fapache-flink-continuous-deployment%2f">
        <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
            xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
            <path
                d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://imalik8088.de/">imalik8088</a></span>
    <span>&middot;</span>
    <span><a href="/imprint" rel="noopener noreferrer">imprint</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
